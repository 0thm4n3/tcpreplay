Summary: A tool to replay captured network traffic.
Name: tcpreplay
Version: @TCPREPLAY_VERSION@
Release: @TCPREPLAY_RELEASE@
License: BSD
Group: Applications/Internet
Source0: http://prdownloads.sf.net/tcpreplay/tcpreplay-%{version}.tar.gz
Prefix: %{_prefix}
BuildRoot: %{_tmppath}/%{name}-root
Packager: Aaron Turner <aturner@pobox.com>
Requires: libnet >= 1.1, libpcap >= 0.5
BuildPreReq: libnet >= 1.1, libpcap >= 0.5
URL: http://tcpreplay.sf.net/

# set to 1 to enable debugging
%define enable_debug 0

%description
Tcpreplay is a suite of tools to edit and replay captured network traffic.
The tcpreplay suite includes tcpreplay, tcpprep, tcprewrite, tcpbridge and
flowreplay.

%prep
%setup -q

%build
%if %{enable_debug}
./configure --enable-debug
%else
./configure
%endif
make

%install
mkdir -p $RPM_BUILD_ROOT%{_bindir}
mkdir -p $RPM_BUILD_ROOT%{_mandir}/man1
install -m755 src/tcpreplay $RPM_BUILD_ROOT%{_bindir} 
install -m755 src/tcpprep $RPM_BUILD_ROOT%{_bindir} 
install -m755 src/flowreplay $RPM_BUILD_ROOT%{_bindir}
install -m755 src/tcpbridge $RPM_BUILD_ROOT%{_bindir}
install -m755 src/tcprewrite $RPM_BUILD_ROOT%{_bindir}

install -m644 man/tcpreplay.1 $RPM_BUILD_ROOT%{_mandir}/man1
install -m644 man/tcpprep.1 $RPM_BUILD_ROOT%{_mandir}/man1
install -m644 man/flowreplay.1 $RPM_BUILD_ROOT%{_mandir}/man1
install -m644 man/tcpbridge.1 $RPM_BUILD_ROOT%{_mandir}/man1
install -m644 man/tcprewrite.1 $RPM_BUILD_ROOT%{_mandir}/man1

%clean
rm -rf ${RPM_BUILD_ROOT}

%files
%defattr(-,root,root)
%doc	docs/CHANGELOG docs/LICENSE docs/README docs/FAQ.html docs/FAQ.txt
%docs/FAQ.pdf docs/FAQ.css docs/manual.pdf docs/manual.css docs/NOTES
%docs/INSTALL docs/manual.html docs/TODO
%{_bindir}/*
%{_mandir}/man1/*


%changelog
* Thu Jun 16 2005 Aaron Turner <aturner@pobox.com>
- Make things right for 3.0

* Wed May 29 2003 Aaron Turner <aturner@pobox.com>
- Update paths for man pages and docs

* Sun Dec 22 2002 Aaron Turner <aturner@pobox.com>
- Update packaging to add pcapmerge and remove tcpprep.FAQ

* Fri Jun 28 2002 Aaron Turner <aturner@pobox.com>
- Initial packaging
